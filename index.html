<html>
<meta name="viewport" content="width=device-width, initial-scale=1">

<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <div class="container">
        <div class="column-1">
            <div class="box">
                <h1><b>Lindenmayer systems</b></h1>
                <p>System to choose:</p>
                <select name="fractal_type" id="fractal_type">
                    <option value="1">Barnsley Fern (max. 8)</option>
                    <option value="2">Fractal Plant (max. 5)</option>
                    <option value="3">Fractal plant 2 (max. 12)</option>
                    <option value="4">Dragon Curve (max. 14)</option>
                    <option value="5">32 Segment Curve (max. 3)</option>
                    <option value="6">Peano Gosper Curve (max. 6)</option>
                    <option value="7">Koch Snowflake (max. 6)</option>
                    <option value="8">Koch Snowflake 2 (max. 6)</option>
                    <option value="9">Koch Snowflake 3 (max. 6)</option>
                    <option value="10">quad. Koch Island (max. 5)</option>
                    <option value="11">quad. Koch Island 2 (max. 4)</option>
                    <option value="12">Islands (max. 4)</option>
                    <option value="13">Islands 2 (max. 4)</option>
                    <option value="14">Sierpinski triangle (max. 8)</option>
                    <option value="15">Sierpinski square (max. 5)</option>
                    <option value="16">Hilbert Curve (max. 8)</option>
                    <option value="17">Frec Fractal (max. 5)</option>
                </select>
                <form>
                    <p>Iterations <input type="number" class="no-outline" placeholder="7" value="7" id="iterations" min="1" max="14"></p>
                    <p>Gradient start <input type="text" class="no-outline" placeholder="#C6EA8D" value="#C6EA8D" id="color1"></p>
                    <p>Gradient end <input type="text" class="no-outline" placeholder="#FE90AF" value="#FE90AF" id="color2"></p>
                    <input type="submit" value="Generate" id="generate" />
                </form>
            </div>
        </div>
        <div class="column-2" id="canvasdiv">
            <canvas id="canvas" height="150" width="150"></canvas>
        </div>
    </div>
    <script type="module">
        import init, {generateCanvas} from './pkg/lsystems.js';
		
		document.getElementById("generate").addEventListener("click", function(event){
			event.preventDefault()
			var iterations = document.getElementById("iterations").value;
			var fractal_type = document.getElementById("fractal_type").value;
            var color1 = document.getElementById("color1").value;
			var color2 = document.getElementById("color2").value;
			run(fractal_type, iterations, color1, color2);
		});
		
		async function run(fractal_type, iterations, color1, color2) {
			await init();
			generateCanvas(fractal_type, iterations, color1, color2);
		}
    </script>
</body>

</html>